# 工业网关系统全面功能测试计划

**文档状态**: 已移动到 `docs/testing/comprehensive-test-plan.md`  
**原位置**: `comprehensive_test_plan.md`  
**移动日期**: 2025-01-18  

## 🎯 测试目标
全面验证工业网关系统的所有功能，确保前端界面的每个按钮、后端的每个API端点都能正常工作，所有数据库操作都能正确执行。

## 🏗️ 系统架构概述
- **前端**: Vue 3 + TypeScript + Element Plus (端口50020)
- **后端API**: Rust + Actix-Web (端口50013/50010)
- **数据库**: PostgreSQL + InfluxDB
- **实时通信**: WebSocket
- **驱动系统**: Modbus等工业协议驱动

## 📋 详细测试计划

### 🔐 1. 认证与安全测试

#### 1.1 登录页面功能测试
- [ ] **登录表单验证**
  - 用户名必填验证
  - 密码必填验证  
  - 错误信息显示
  - 表单提交按钮状态
- [ ] **登录功能测试**
  - 正确用户名密码登录成功
  - 错误用户名密码登录失败
  - 空用户名/密码提交
  - 登录成功后跳转到仪表板
- [ ] **会话管理测试**
  - 登录状态保持
  - 自动跳转到登录页（未认证时）
  - 登出功能（如果有）

### 📊 2. 仪表板页面测试

#### 2.1 页面加载测试
- [ ] **基础页面加载**
  - 仪表板页面正常渲染
  - 所有组件正确显示
  - 无JavaScript错误
- [ ] **数据概览测试**
  - 系统状态卡片显示
  - 设备连接状态统计
  - 数据采集状态监控
  - 实时数据更新

#### 2.2 交互功能测试
- [ ] **刷新功能**
  - 手动刷新按钮
  - 自动刷新机制
  - 数据更新时间显示
- [ ] **快捷操作**
  - 快速配置设备按钮
  - 查看详细状态链接
  - 跳转到具体管理页面

### 🔗 3. 实时数据页面测试

#### 3.1 实时数据显示
- [ ] **数据表格测试**
  - 数据点列表显示
  - 实时数值更新
  - 时间戳准确性
  - 数据状态指示（在线/离线/异常）
- [ ] **图表显示测试**
  - 实时曲线图渲染
  - 数据点选择和切换
  - 时间窗口调整
  - 图表数据刷新
- [ ] **WebSocket连接测试**
  - WebSocket连接建立
  - 实时数据推送
  - 连接断开重连机制
  - 错误处理

#### 3.2 控制功能测试
- [ ] **数据控制**
  - 暂停/恢复数据更新
  - 历史数据回放（如果有）
  - 数据导出功能
- [ ] **显示设置**
  - 数据点筛选
  - 显示精度设置
  - 图表样式配置

### 🚀 4. 驱动管理页面测试

#### 4.1 驱动列表管理
- [ ] **驱动列表显示**
  - 驱动配置列表加载
  - 驱动状态显示（运行/停止/错误）
  - 分页功能（如果有）
  - 搜索和筛选功能
- [ ] **驱动操作按钮**
  - 启动驱动按钮
  - 停止驱动按钮
  - 重启驱动按钮
  - 删除驱动按钮
  - 编辑驱动配置按钮

#### 4.2 驱动配置管理
- [ ] **创建新驱动配置**
  - 添加驱动配置按钮
  - 驱动配置表单填写
  - 表单验证（必填项、格式验证）
  - 配置保存功能
- [ ] **编辑驱动配置**
  - 编辑按钮功能
  - 表单数据回显
  - 修改保存功能
  - 取消编辑功能
- [ ] **驱动配置详情**
  - 查看详情按钮
  - 配置参数显示
  - 连接状态监控
  - 错误日志查看

### 📡 5. 设备管理页面测试

#### 5.1 设备列表管理
- [ ] **设备列表显示**
  - 设备列表加载
  - 设备信息显示（名称、协议、状态等）
  - 连接状态实时更新
- [ ] **设备操作**
  - 添加设备按钮
  - 编辑设备按钮
  - 删除设备按钮
  - 连接测试按钮

#### 5.2 设备配置管理  
- [ ] **设备配置表单**
  - 设备基本信息配置
  - 连接参数设置
  - 协议选择和配置
  - 表单验证和保存
- [ ] **设备状态监控**
  - 设备连接状态
  - 数据采集状态
  - 错误信息显示
  - 性能指标监控

### 🏷️ 6. 标签管理页面测试

#### 6.1 标签列表管理
- [ ] **标签列表显示**
  - 标签列表加载
  - 标签属性显示（名称、地址、数据类型等）
  - 标签状态监控
- [ ] **标签操作**
  - 添加标签按钮
  - 批量添加标签
  - 编辑标签按钮
  - 删除标签按钮
  - 导入/导出标签配置

#### 6.2 标签配置管理
- [ ] **标签配置表单**
  - 标签基本信息
  - 数据地址配置
  - 数据类型选择
  - 缩放和偏移设置
  - 报警配置
- [ ] **标签数据验证**
  - 实时数据读取测试
  - 数据类型转换验证
  - 数值范围检查
  - 数据质量状态

### 📈 7. 数据分析页面测试

#### 7.1 历史数据查询
- [ ] **查询功能**
  - 时间范围选择
  - 数据点筛选
  - 查询条件设置
  - 查询结果显示
- [ ] **数据可视化**
  - 历史趋势图表
  - 统计数据显示
  - 数据对比分析
  - 图表交互功能

#### 7.2 数据分析工具
- [ ] **统计分析**
  - 数据统计计算
  - 趋势分析
  - 异常数据检测
- [ ] **报表生成**
  - 报表模板选择
  - 自定义报表
  - 报表导出功能

### 🔔 8. 告警管理页面测试

#### 8.1 告警规则管理
- [ ] **告警规则列表**
  - 规则列表显示
  - 规则状态管理
  - 规则优先级设置
- [ ] **告警规则配置**
  - 创建告警规则
  - 规则条件设置
  - 通知方式配置
  - 规则测试功能

#### 8.2 告警历史管理
- [ ] **告警历史列表**
  - 告警记录显示
  - 告警级别筛选
  - 确认/忽略操作
- [ ] **告警通知**
  - 实时告警通知
  - 邮件通知功能
  - WebSocket告警推送

### ⚙️ 9. 系统管理页面测试

#### 9.1 系统配置管理
- [ ] **系统参数配置**
  - 基础配置修改
  - 网络配置设置
  - 安全配置管理
- [ ] **用户权限管理**
  - 用户列表管理
  - 权限分配
  - 角色管理

#### 9.2 系统监控
- [ ] **系统状态监控**
  - CPU、内存使用率
  - 磁盘空间监控
  - 网络连接状态
- [ ] **日志管理**
  - 系统日志查看
  - 错误日志筛选
  - 日志导出功能

### 🧪 10. API接口测试

#### 10.1 RESTful API测试
- [ ] **设备管理API**
  - GET /api/v1/devices
  - POST /api/v1/devices
  - PUT /api/v1/devices/{id}
  - DELETE /api/v1/devices/{id}
- [ ] **标签管理API**
  - GET /api/v1/tags
  - POST /api/v1/tags  
  - PUT /api/v1/tags/{id}
  - DELETE /api/v1/tags/{id}
- [ ] **驱动管理API**
  - GET /api/v1/drivers
  - POST /api/v1/drivers
  - PUT /api/v1/drivers/{id}
  - DELETE /api/v1/drivers/{id}
- [ ] **历史数据API**
  - GET /api/v1/history
  - POST /api/v1/history/query
- [ ] **实时数据API**
  - GET /api/v1/realtime
  - WebSocket /ws/realtime

#### 10.2 API性能测试
- [ ] **响应时间测试**
  - 单个请求响应时间
  - 并发请求性能
  - 大数据量查询性能
- [ ] **错误处理测试**
  - 4xx错误响应
  - 5xx错误响应
  - 网络异常处理

### 🗄️ 11. 数据库集成测试

#### 11.1 PostgreSQL集成测试
- [ ] **数据持久化测试**
  - 设备配置数据保存
  - 标签配置数据保存
  - 驱动配置数据保存
- [ ] **数据一致性测试**
  - 前端显示与数据库数据一致性
  - API返回与数据库数据一致性
  - 并发操作数据一致性

#### 11.2 InfluxDB集成测试
- [ ] **时序数据写入**
  - 实时数据写入测试
  - 批量数据写入测试
  - 写入性能测试
- [ ] **时序数据查询**
  - 历史数据查询测试
  - 聚合查询测试
  - 查询性能测试

### 🔄 12. 端到端集成测试

#### 12.1 完整数据流测试
- [ ] **数据采集流程**
  - 设备连接 → 驱动启动 → 数据采集 → 数据存储 → 前端显示
- [ ] **配置变更流程**
  - 前端配置修改 → API调用 → 数据库更新 → 驱动重载 → 生效验证
- [ ] **告警触发流程**
  - 数据异常 → 告警规则匹配 → 告警通知 → 前端显示

#### 12.2 异常场景测试
- [ ] **网络异常测试**
  - 设备断线处理
  - API服务异常
  - 数据库连接异常
- [ ] **数据异常测试**
  - 错误数据处理
  - 数据类型不匹配
  - 数据范围异常

## 🎯 测试执行策略

### 测试优先级
1. **P0（高优先级）**: 核心功能、数据安全、系统稳定性
2. **P1（中优先级）**: 用户体验、性能、易用性  
3. **P2（低优先级）**: 边缘场景、优化建议

### 测试环境
- **开发环境**: 功能验证和调试
- **测试环境**: 完整集成测试
- **准生产环境**: 性能和稳定性验证

### 自动化测试覆盖
- **API测试**: Postman/Newman集合，覆盖所有REST端点
- **UI测试**: Playwright端到端测试，覆盖关键用户流程
- **性能测试**: JMeter负载测试，验证系统性能指标

## 📊 测试交付物

1. **测试执行报告**: 详细的测试结果和发现的问题
2. **缺陷报告**: 按优先级分类的问题列表和修复建议
3. **性能报告**: 系统性能基线和瓶颈分析
4. **测试数据**: 自动化测试脚本和测试数据集
5. **用户验收标准**: 各功能模块的验收条件

---

*本测试计划覆盖工业网关系统的全部功能，确保系统达到生产就绪状态*