# 数据模型、存储与迁移

## 存储

- PostgreSQL：主配置/元数据仓库（`infra/pg-repo/`，迁移在 `schema/migrations/`）
- InfluxDB：历史与统计数据（查询能力在 `core/web-gw-api/src/services/history.rs`）

## 主要实体

- 设备（Device）
- 点位（Tag）
- 驱动配置（DriverConfig）与生命周期状态
- 报警规则（AlertRule）、报警事件（AlertEvent）

## 迁移治理

- 新增字段/表：迁移脚本 + 回滚脚本
- 数据填充：默认值函数（如 `default_true` 等）
- 性能：分页查询、索引策略、历史数据归档
